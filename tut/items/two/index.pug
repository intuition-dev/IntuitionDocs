head
    include /layout/headFrag
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/gh/intuition-dev/intuDS@v1.0.3/src/css/min.min.css')

body
    .pgCont
        .top
            p oh hi
            hr

        .splitCont
            #left.split
                .main
                    .mediaContainerTop
                        p oh hi
                        //vXideo#vid1.vid( autoplay preload='auto' loop muted )
                            source(src='arc2.mp4' type="video/mp4" )
                        
                    .mainBot
            
                        p oh hi

            #right.split
                div
                    button Up
                    p
                    button Down
       

    style.
        /* video detach button */
        //  video popout
        // https://css-tricks.com/custom-controls-in-html5-video-full-screen/
        // May remove other useful browser popups, inserted after "body" element.
        ::-webkit-media-controls {
            display:none !important;
        }
        video::-webkit-media-controls-enclosure {
           display:none !important;
        }

        * { margin: 0; padding: 0; }
        html, body { 
            width: 100%; 
            height: 100%; 
            overflow: hidden;
        }
        .pgCont {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-height: 100vh;
        }
        .splitCont {
            flex-grow: 1;
        }
        .gutter {
            background-color: gray;
            width: 10px;
        }

        .top {
            height: 3.5em;
        }
        .main {
            display: flex; /* second flex level */
            flex-direction: column;
            height: calc(100% - 3.4em);

            border:  3px solid yellow;
            background: green;            
        }
        .mediaContainerTop { /* fluid */
            flex-grow: 0;
            position: relative;
            
            border:  1px solid red;
            background: gray;	
        }
        .mainBot {
            flex-grow: 1;

            border:  1px solid blue;
            background: silver;	           
        }


    script.
        window.split = null
        window.addEventListener('resize', resizeVid) 
        function resizeVid() {
            var w = $('.main').width()
            var h = $('.main').height() - $('.mainBot').height()

            // math:
            console.log('>>>>')
            var nh = w * 0.5625
            var nw = h * 1.7777 //based on new hn
            console.log('c:', w, h, nw, nh)       

            if(nw>w) {
                console.log('too wide')
                $('.mediaContainerTop').width( nw)
                $('.mediaContainerTop').height(  nh)
            }
            if(nh>h) {
                console.log('too tall')
                $('.mediaContainerTop').width( nw)
                $('.mediaContainerTop').height(  nh)
            }

            nw = nw-5
            
            console.log('<<<')
        }//()


        toolBeltDefault()
        depp.require(['split', 'DOMDelayed', 'jquery'], function() {
            
            window.split = Split( [document.querySelector('#left'), document.querySelector('#right')] , {
                direction: 'horizontal',
                sizes: [90, 10],
                minSize: [100, 0]

            })
            console.log('ready!')

            resizeVid()
            
        })//depp
