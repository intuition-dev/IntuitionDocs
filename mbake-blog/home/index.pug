extends /layout/layout

block main
  #pagination-container.custom-pagination
  card-comp  
  
  script.
    axios.get('../posts/items.json').then(function(resp) {
       resp.data.items = resp.data.items.filter(item => item.publish1 === true);
       posts = resp.data;
       console.info('resp.data --------->', posts);
    
       const tag = riot.mount('card-comp')[0]; 
       console.info('posts.items ------------>', posts.items);
       tag.render(posts.items);
       
       
       depp.require(['cssJs'], function() {
            pgContainer =[];
            pgContCount=-1;
            setupPg(guessShow(), posts);
         });

       function setupPg(perPage, posts_) {
          console.info('PG');
          pgContCount++;
          console.info('s', pgContCount);
          pgContainer[pgContCount] = $('#pagination-container');

          perPage = 3;

          pgContainer[pgContCount].pagination({
             className: 'paginationjs-theme-blue',
             dataSource: posts_,
             locator: 'items',
             pageSize: perPage,
             autoHidePrevious: true,
             autoHideNext: true,
             callback: function(data, pagination) {
                tag.render(data);
             }
          })

       }//()

       function guessShow() {
          let n = ( $(window).width() * $(window).height()  ) / ( 300 * 400) * .9;
          n = Math.round( n * .7);
          console.info('g', n);
          return n;
       }
       
     });
  
  
